
<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>VendsÇa — petites annonces (WhatsApp)</title>
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 130 32'%3E%3Crect width='130' height='32' rx='8' fill='%23FF7A00'/%3E%3Ctext x='50%25' y='55%25' text-anchor='middle' font-size='16' font-family='Inter,Arial' fill='white'%3EVendsÇa%3C/text%3E%3C/svg%3E">
<style>
:root{--bg:#0f0f11;--card:#15161a;--muted:#9aa3ad;--text:#eef1f5;--orange:#ff7a00;--orange-700:#e86d00;--line:#26282e}
*{box-sizing:border-box}html,body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Arial}
a{color:var(--text);text-decoration:none}
.container{max-width:980px;margin:0 auto;padding:20px}
.nav{display:flex;gap:14px;align-items:center;justify-content:space-between;padding:14px 0;border-bottom:1px solid var(--line)}
.badge{background:#1e2026;color:var(--muted);padding:4px 10px;border-radius:999px;font-size:12px;border:1px solid var(--line)}
.links a{opacity:.9;margin:0 10px}
h1{margin:0 0 10px;font-size:32px}
.card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:18px}
.grid{display:grid;gap:14px}
.cols-2{grid-template-columns:1fr 1fr}
.hero{display:grid;gap:18px;padding:26px 0}
.input,select,textarea{width:100%;background:#101217;color:var(--text);border:1px solid var(--line);border-radius:10px;padding:12px 14px}
label{font-size:14px;color:var(--muted);display:block;margin:6px 0}
.btn{background:var(--orange);border:none;padding:14px 18px;border-radius:10px;color:#fff;font-weight:700}
.btn:hover{background:var(--orange-700);cursor:pointer}
.meta{color:var(--muted);font-size:13px}
.item{display:grid;gap:8px;border:1px solid var(--line);border-radius:12px;padding:14px;background:#121318}
.tag{display:inline-block;padding:3px 8px;border-radius:8px;background:#1a1d23;border:1px solid var(--line);font-size:12px;color:var(--muted)}
.toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
hr{border:0;border-top:1px solid var(--line);margin:16px 0}
footer{margin:36px 0 24px;color:var(--muted);font-size:13px}
@media(max-width:780px){.cols-2{grid-template-columns:1fr}h1{font-size:26px}}
/* tabs */
.tabs{display:flex;gap:8px;margin-bottom:14px}
.tab{border:1px solid var(--line);background:#101217;color:var(--text);padding:10px 12px;border-radius:10px}
.tab.active{background:var(--orange);color:#fff;border-color:var(--orange)}
.hidden{display:none}
</style>
</head>
<body>
<div class="container">

  <!-- NAV -->
  <nav class="nav">
    <div style="display:flex;align-items:center;gap:10px">
      <span class="badge">VendsÇa</span>
      <span class="meta">Plateforme d’annonces</span>
    </div>
    <div class="links">
      <a href="#" onclick="show('home');return false;">Accueil</a>
      <a href="#" onclick="show('list');return false;">Annonces</a>
      <a href="#" onclick="show('post');return false;">Déposer</a>
      <a href="#" onclick="show('legal');return false;">Mentions</a>
    </div>
  </nav>

  <!-- TABS -->
  <div class="tabs">
    <button class="tab active" id="t-home" onclick="show('home')">Accueil</button>
    <button class="tab" id="t-list" onclick="show('list')">Annonces</button>
    <button class="tab" id="t-post" onclick="show('post')">Déposer</button>
    <button class="tab" id="t-legal" onclick="show('legal')">Mentions</button>
  </div>

  <!-- ACCUEIL -->
  <section id="home" class="hero">
    <h1>Simple, rapide, efficace.</h1>
    <div class="card">
      <div class="grid cols-2">
        <div>
          <h3>Comment ça marche ?</h3>
          <p class="meta">
            1) Dépose ton annonce.<br>
            2) J’en reçois le récap sur WhatsApp (+33 7 72 44 24 52).<br>
            3) L’annonce apparaît ici (stockage local pour test/validation).
          </p>
          <button class="btn" onclick="show('post')">Déposer une annonce</button>
        </div>
        <div>
          <h3>Parcourir</h3>
          <p class="meta">Recherche, filtre par catégorie, statut (en attente/validée). Admin local pour valider/supprimer.</p>
          <button class="btn" onclick="show('list')">Voir les annonces</button>
        </div>
      </div>
    </div>
  </section>

  <!-- LISTE -->
  <section id="list" class="hero hidden">
    <h1>Annonces</h1>
    <div class="card">
      <div class="grid cols-2">
        <input id="q" class="input" placeholder="Recherche (titre, ville…)">
        <select id="catSel" class="input">
          <option value="all">Toutes catégories</option>
          <option>Informatique</option><option>Smartphones</option>
          <option>Véhicules</option><option>Maison</option>
          <option>Loisirs</option><option>Services</option>
        </select>
      </div>
      <label style="margin-top:10px"><input type="checkbox" id="onlyPending"> Afficher seulement “En attente”</label>
      <div id="listWrap" class="grid" style="margin-top:12px"></div>
    </div>
  </section>

  <!-- DEPOT -->
  <section id="post" class="hero hidden">
    <h1>Déposer une annonce</h1>
    <div class="card">
      <form id="f" class="grid cols-2">
        <div><label>Titre</label><input class="input" name="title" placeholder="Ex. iPhone 12 128 Go" required></div>
        <div><label>Prix (€)</label><input class="input" name="price" inputmode="decimal" placeholder="Ex. 250" required></div>
        <div><label>Ville</label><input class="input" name="city" placeholder="Ex. Rouen" required></div>
        <div><label>Téléphone vendeur</label><input class="input" name="phone" placeholder="Ex. 06 12 34 56 78" required></div>
        <div>
          <label>Catégorie</label>
          <select class="input" name="cat">
            <option>Informatique</option><option>Smartphones</option>
            <option>Véhicules</option><option>Maison</option>
            <option>Loisirs</option><option>Services</option>
          </select>
        </div>
        <div style="grid-column:1/-1">
          <label>Description</label>
          <textarea class="input" name="desc" rows="6" placeholder="État, accessoires, facture, remise en main propre…"></textarea>
        </div>
        <div style="grid-column:1/-1">
          <button class="btn">Envoyer & ouvrir WhatsApp</button>
          <p class="meta" style="margin-top:8px">Ajoute ensuite tes photos dans la conversation WhatsApp.</p>
        </div>
      </form>
    </div>
  </section>

  <!-- MENTIONS -->
  <section id="legal" class="hero hidden">
    <h1>Mentions légales</h1>
    <div class="card">
      <p><b>Éditeur :</b> VendsÇa</p>
      <p><b>Contact :</b> <a href="mailto:hamed.diarra@gmail.com">hamed.diarra@gmail.com</a></p>
      <p><b>WhatsApp :</b> +33 7 72 44 24 52</p>
      <hr>
      <p class="meta">
        VendsÇa est une plateforme de petites annonces. Les annonces sont
        publiées sous la responsabilité de leurs auteurs. Suppression/rectification
        sur simple demande par email ou WhatsApp. Aucune adresse personnelle n’est publiée.
      </p>
      <p class="meta">Hébergement : GitHub Pages (ou Hostinger).</p>
    </div>
  </section>

  <footer>© 2025 VendsÇa — Tous droits réservés.</footer>
</div>

<script>
/* ========= CONFIG ========= */
const WA_NUMBER = "+33772442452"; // ton WhatsApp
const KEY = "vendsca_ads_v1";

/* ========= STORAGE ========= */
const load = ()=> { try{return JSON.parse(localStorage.getItem(KEY))||[]}catch{return[]} };
const save = (arr)=> localStorage.setItem(KEY, JSON.stringify(arr));

/* ========= UI / ROUTER ========= */
function show(id){
  ["home","list","post","legal"].forEach(s=>{
    document.getElementById(s).classList.toggle("hidden", s!==id);
    document.getElementById("t-"+s).classList.toggle("active", s===id);
  });
  if(id==="list") renderList();
  window.scrollTo(0,0);
}

/* ========= LIST ========= */
function €(v){const n=Number(v||0);return isNaN(n)?v:new Intl.NumberFormat('fr-FR',{style:'currency',currency:'EUR'}).format(n)}
function renderList(){
  const wrap = document.getElementById("listWrap");
  if(!wrap) return;
  const term = (document.getElementById("q").value||"").toLowerCase();
  const cat = document.getElementById("catSel").value;
  const onlyP = document.getElementById("onlyPending").checked;

  let ads = load();
  if(cat!=="all") ads = ads.filter(a=>a.cat===cat);
  if(onlyP) ads = ads.filter(a=>a.status!=="valid");
  if(term) ads = ads.filter(a => (a.title+a.city+a.desc).toLowerCase().includes(term));

  wrap.innerHTML = ads.map(a=>`
    <div class="item">
      <div style="font-weight:700">${a.title}</div>
      <div class="meta">
        <span class="tag">${a.cat}</span> • ${a.city} • ${€(a.price)}
      </div>
      <div class="meta">Vendeur : ${a.phone}</div>
      <div>${(a.desc||"").replace(/\n/g,"<br>")}</div>
      <div class="toolbar">
        <button class="btn" onclick="contact(${a.id})">Contacter</button>
        <span class="tag">${a.status==="valid"?"Validée":"En attente"}</span>
        <span style="flex:1"></span>
        <button class="badge" onclick="toggle(${a.id})">Basculer statut</button>
        <button class="badge" onclick="delAd(${a.id})">Supprimer</button>
      </div>
    </div>
  `).join("") || `<div class="meta">Aucune annonce pour le moment.</div>`;
}

function contact(id){
  const ad = load().find(x=>x.id===id); if(!ad) return;
  const msg = `Demande d'info (VendsÇa)\n\n• ${ad.title} — ${€(ad.price)} — ${ad.city}\n• Vendeur: ${ad.phone}\n\nBonjour, je suis intéressé(e).`;
  const url = "https://wa.me/"+WA_NUMBER.replace(/\D/g,"")+"?text="+encodeURIComponent(msg);
  window.open(url,"_blank");
}
function toggle(id){
  const ads = load(); const i = ads.findIndex(x=>x.id===id); if(i<0) return;
  ads[i].status = ads[i].status==="valid" ? "pending" : "valid"; save(ads); renderList();
}
function delAd(id){
  if(!confirm("Supprimer cette annonce ?")) return;
  save(load().filter(x=>x.id!==id)); renderList();
}

/* ========= FORM ========= */
document.getElementById("f").addEventListener("submit", e=>{
  e.preventDefault();
  const d = new FormData(e.target);
  const ad = {
    id: Date.now(),
    title: d.get("title").trim(),
    price: d.get("price").trim(),
    city: d.get("city").trim(),
    phone: d.get("phone").trim(),
    cat: d.get("cat"),
    desc: d.get("desc").trim(),
    status: "pending",
    createdAt: new Date().toISOString()
  };
  const ads = load(); ads.unshift(ad); save(ads);

  const msg =
`Nouvelle annonce via VendsÇa :

• Titre : ${ad.title}
• Prix : ${ad.price} €
• Catégorie : ${ad.cat}
• Ville : ${ad.city}
• Téléphone vendeur : ${ad.phone}

Description :
${ad.desc}

(Photos à joindre dans WhatsApp)`;

  const url = "https://wa.me/"+WA_NUMBER.replace(/\D/g,"")+"?text="+encodeURIComponent(msg);
  window.open(url,"_blank");
  e.target.reset();
  alert("Annonce enregistrée localement et envoyée sur WhatsApp 👍");
  show('list');
});

/* auto-tab selon l'ancre */
const hash = (location.hash||"").replace("#","");
show(["list","post","legal"].includes(hash)?hash:"home");
</script>
</body>
</html>
